<!DOCTYPE html>
<html lang="en">
<head>
    <title>Edit Business Contact</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="icon" type="image/png" href="/assets/images/icons/favicon.ico"/>
    <link rel="stylesheet" type="text/css" href="/assets/vendor/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/assets/fonts/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" type="text/css" href="/assets/vendor/animate/animate.css">
    <link rel="stylesheet" type="text/css" href="/assets/vendor/css-hamburgers/hamburgers.min.css">
    <link rel="stylesheet" type="text/css" href="/assets/vendor/animsition/css/animsition.min.css">
    <link rel="stylesheet" type="text/css" href="/assets/vendor/select2/select2.min.css">
    <link rel="stylesheet" type="text/css" href="/assets/vendor/daterangepicker/daterangepicker.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/util.css">
    <link rel="stylesheet" type="text/css" href="/assets/css/business.css">
</head>
<body>


<div class="container-contact100">

    <div class="wrap-contact100">
        <form id="updateContact" class="contact100-form validate-form" method="post">
				<span class="contact100-form-title">
					Edit Business Contact
				</span>

            <div class="wrap-input100 validate-input" data-validate="Please enter your name">
                <input class="input100" type="text" name="username" placeholder="Full Name"
                       value="<%= contact.username %>">
                <span class="focus-input100"></span>
            </div>

            <div class="wrap-input100 validate-input" data-validate="Please enter your email: e@a.x">
                <input class="input100" type="text" name="email" placeholder="E-mail" value="<%= contact.email %>">
                <span class="focus-input100"></span>
            </div>

            <div class="wrap-input100 validate-input" data-validate="Please enter your phone">
                <input class="input100" type="text" name="phone" placeholder="Phone" value="<%= contact.phone %>">
                <span class="focus-input100"></span>
            </div>

            <div class="container-contact100-form-btn">
                <button class="contact100-form-btn" type="submit">
						<span>
							<i class="fa fa-paper-plane-o m-r-6" aria-hidden="true"></i>
							Save
						</span>
                </button>
            </div>
            <div class="container-contact100-form-btn">
                <button class="contact100-form-btn" id="deleteContact">
						<span>
							<i class="fa fa-paper-plane-o m-r-6" aria-hidden="true"></i>
							Delete
						</span>
                </button>
            </div>
        </form>
    </div>
</div>


<div id="dropDownSelect1"></div>

<script src="/assets/vendor/jquery/jquery-3.2.1.min.js"></script>
<script src="/assets/vendor/animsition/js/animsition.min.js"></script>
<script src="/assets/vendor/bootstrap/js/popper.js"></script>
<script src="/assets/vendor/bootstrap/js/bootstrap.min.js"></script>
<script src="/assets/vendor/select2/select2.min.js"></script>
<script src="/assets/vendor/daterangepicker/moment.min.js"></script>
<script src="/assets/vendor/daterangepicker/daterangepicker.js"></script>
<script src="/assets/vendor/countdowntime/countdowntime.js"></script>
<script src="/assets/js/main.js"></script>
<script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-23581568-13"></script>
<script>
    window.dataLayer = window.dataLayer || [];

    function gtag() {
        dataLayer.push(arguments);
    }

    gtag('js', new Date());

    gtag('config', 'UA-23581568-13');
</script>

<script>
    $("#updateContact").submit(function (e) {

        e.preventDefault(); // avoid to execute the actual submit of the form.

        var form = $(this);
        var url = form.attr('action');

        $.ajax({
            type: "PUT",
            url: "/business/update/<%= contact._id %>",
            data: form.serialize(), // serializes the form's elements.
            success: function (data) {
                location.href = "/business"
            },
            error: function (data) {
                console.log('An error occurred.');
                console.log(data);
            },
        });


    });
</script>
<script>
    $("#deleteContact").click(function (e) {
        e.preventDefault(); // avoid to execute the actual submit of the form.

        var form = $(this);
        var url = form.attr('action');

        $.ajax({
            type: "DELETE",
            url: "/business/delete/<%= contact._id %>",
            data: form.serialize(), // serializes the form's elements.
            success: function (data) {
                location.href = "/business"
            },
            error: function (data) {
                console.log('An error occurred.');
                console.log(data);
            },
        });


    })
</script>
</body>
</html>
